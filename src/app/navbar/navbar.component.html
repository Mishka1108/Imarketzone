<!-- navbar.component.html - BEAUTIFUL CIRCULAR PROFILE WITH BADGE -->

<div class="nav">
  <div class="navmenu">
    <mat-icon (click)="toggleMenu()" class="navIcon">
      {{ isShow ? 'close' : 'menu' }}
    </mat-icon>
    <a routerLink="/home">
      <img 
        src="https://i.ibb.co/bjXGQNZL/favicon-100x100.png" 
        class="logo" 
        alt="Logo"
        (click)="closeMenu()">
    </a>
  </div>
  
  <div class="components" [ngClass]="{'show-menu': isShow}"> 
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="home">
      {{ 'nav.home' | translate }}
    </button>
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="public-products">
      {{ 'nav.products' | translate }}
    </button>
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="contact">
      {{ 'nav.contact' | translate }}
    </button>
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="rules">
      {{ 'nav.rules' | translate }}
    </button>
  </div>

  <!-- âœ… LANGUAGE SELECTOR BUTTONS -->
  <div class="language-selector">
    <button 
      (click)="testLanguageChange('en')" 
      [class.active]="currentLanguage === 'en'"
      [style.background]="currentLanguage === 'en' ? 'green' : 'gray'"
      [style.color]="'white'"
      [style.padding]="'10px'"
      type="button">
      Eng [{{currentLanguage === 'en' ? 'âœ“' : 'âœ—'}}]
    </button>
    <button 
      (click)="testLanguageChange('ka')" 
      [class.active]="currentLanguage === 'ka'"
      [style.background]="currentLanguage === 'ka' ? 'green' : 'gray'"
      [style.color]="'white'"
      [style.padding]="'10px'"
      type="button">
      Geo [{{currentLanguage === 'ka' ? 'âœ“' : 'âœ—'}}]
    </button>
  </div>


  <!-- âœ¨ PERFECT CIRCULAR PROFILE IMAGE WITH BEAUTIFUL BADGE -->
  <div class="profile-container">
    <div class="profile-wrapper">
      <img 
        [src]="profileImageUrl" 
        class="profileimg" 
        (click)="closeMenu(); onProfileImageClick()" 
        alt="Profile"
        [title]="unreadMessagesCount > 0 ? unreadMessagesCount + ' ' + ('msg.unread' | translate) : ('profile.profile' | translate)">
      
      <!-- Custom Beautiful Badge -->
      <div class="custom-badge" *ngIf="unreadMessagesCount > 0">
        {{ unreadMessagesCount > 99 ? '99+' : unreadMessagesCount }}
      </div>
    </div>
  </div>
</div>

<!-- ðŸ”” BEAUTIFUL MESSAGE NOTIFICATION POPUP -->
<div 
  *ngIf="showNotification && notificationData" 
  class="message-notification"
  [@notificationAnimation]
  (click)="onNotificationClick()">
  
  <div class="notification-content">
    <!-- Close Button -->
    <button 
      class="close-btn" 
      (click)="hideNotification(); $event.stopPropagation()" 
      [attr.aria-label]="'common.close' | translate"
      [title]="'common.close' | translate">
      <mat-icon>close</mat-icon>
    </button>
    
    <!-- Notification Header -->
    <div class="notification-header">
      <img 
        [src]="notificationData.avatar" 
        [alt]="'profile.avatar' | translate" 
        class="notification-avatar"
        (error)="onImageError($event)">
      
      <div class="notification-info">
        <div class="notification-title">
          <mat-icon class="message-icon">mail</mat-icon>
          <span>{{ 'msg.newMessage' | translate }}</span>
        </div>
        <div class="sender-name">{{ notificationData.senderName }}</div>
      </div>
    </div>
    
    <!-- Message Content -->
    <div class="notification-message">
      {{ notificationData.message }}
    </div>
    
    <!-- Action Hint -->
    <div class="notification-action">
      <small>{{ 'msg.clickToReply' | translate }}</small>
    </div>
  </div>
</div>