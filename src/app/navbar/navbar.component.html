<!-- navbar.component.html - WITH TRANSLATION -->

<div class="nav">
  <div class="navmenu">
    <mat-icon (click)="toggleMenu()" class="navIcon">
      {{ isShow ? 'close' : 'menu' }}
    </mat-icon>
    <a routerLink="/home">
      <img 
        src="https://i.ibb.co/bjXGQNZL/favicon-100x100.png" 
        class="logo" 
        alt="Logo"
        (click)="closeMenu()">
    </a>
  </div>
  
  <div class="components" [ngClass]="{'show-menu': isShow}"> 
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="home">
      {{ 'NAV.HOME' | translate }}
    </button>
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="public-products">
      {{ 'NAV.PRODUCTS' | translate }}
    </button>
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="contact">
      {{ 'NAV.CONTACT' | translate }}
    </button>
    <button mat-raised-button 
            class="btn" 
            routerLinkActive="active" 
            (click)="closeMenu()" 
            routerLink="rules">
      {{ 'NAV.RULES' | translate }}
    </button>
  </div>

  <!-- ‚ú® BEAUTIFUL LANGUAGE TRANSLATOR -->
  <div class="translator">
    <button 
      [class.active]="currentLang === 'ka'"
      (click)="changeLanguage('ka')"
      [attr.aria-label]="'Switch to Georgian'">
      ·É•·Éê·É†
    </button>
    <button 
      [class.active]="currentLang === 'en'"
      (click)="changeLanguage('en')"
      [attr.aria-label]="'Switch to English'">
      Eng
    </button>
  </div>

  <!-- ‚ú® PROFILE WITH BADGE -->
  <div class="profile-container">
    <div class="profile-wrapper">
      <img 
        [src]="profileImageUrl" 
        class="profileimg" 
        (click)="closeMenu(); onProfileImageClick()" 
        alt="Profile"
        [title]="unreadMessagesCount > 0 
          ? unreadMessagesCount + ' ' + ('NAV.UNREAD_MESSAGES' | translate) 
          : ('NAV.PROFILE' | translate)">
      
      <div class="custom-badge" *ngIf="unreadMessagesCount > 0">
        {{ unreadMessagesCount > 99 ? '99+' : unreadMessagesCount }}
      </div>
    </div>
  </div>
</div>

<!-- üîî BEAUTIFUL MESSAGE NOTIFICATION POPUP -->
<div 
  *ngIf="showNotification && notificationData" 
  class="message-notification"
  [@notificationAnimation]
  (click)="onNotificationClick()">
  
  <div class="notification-content">
    <button 
      class="close-btn" 
      (click)="hideNotification(); $event.stopPropagation()" 
      [attr.aria-label]="'NOTIFICATIONS.CLOSE' | translate"
      [title]="'NOTIFICATIONS.CLOSE' | translate">
      <mat-icon>close</mat-icon>
    </button>
    
    <div class="notification-header">
      <img 
        [src]="notificationData.avatar" 
        [alt]="'User avatar'" 
        class="notification-avatar"
        (error)="onImageError($event)">
      
      <div class="notification-info">
        <div class="notification-title">
          <mat-icon class="message-icon">mail</mat-icon>
          <span>{{ 'NOTIFICATIONS.NEW_MESSAGE' | translate }}</span>
        </div>
        <div class="sender-name">{{ notificationData.senderName }}</div>
      </div>
    </div>
    
    <div class="notification-message">
      {{ notificationData.message }}
    </div>
    
    <div class="notification-action">
      <small>{{ 'NOTIFICATIONS.CLICK_TO_REPLY' | translate }}</small>
    </div>
  </div>
</div>