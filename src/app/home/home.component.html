<div class="home">
    <div class="market">
        <span class="buysel">{{ 'HOME.HERO.BUY_SELL' | translate }} </span>
        <span class="mart">{{ 'HOME.HERO.EASILY' | translate }}</span>
        <p class="text">{{ 'HOME.HERO.DESCRIPTION' | translate }}</p>
        
        <!-- ·É´·Éî·Éë·Éú·Éò·É° ·É°·Éî·É•·É™·Éò·Éê -->
      <div class="search-section">
  <div class="search-container">
    <input type="text" 
           [placeholder]="'HOME.SEARCH.PLACEHOLDER' | translate" 
           [(ngModel)]="searchQuery" 
           (input)="onSearchInput($event)"
           (keyup.enter)="onSearch()"
           (focus)="showSuggestions = true"
           class="search-input">
    <button mat-flat-button (click)="onSearch()" class="search-button">
      <span class="material-icons">search</span>
    </button>
    
    <!-- Suggestions dropdown -->
    <div class="suggestions-dropdown" *ngIf="showSuggestions && searchQuery.trim().length > 0">
      
      <!-- Loading state -->
      <div class="suggestions-section" *ngIf="isLoadingProducts">
        <div class="loading-item">
          <span class="material-icons">refresh</span>
          <span>{{ 'HOME.SEARCH.LOADING' | translate }}</span>
        </div>
      </div>
      
      <!-- Categories section -->
      <div class="suggestions-section" *ngIf="getFilteredCategories().length > 0">
        <h4>{{ 'HOME.SEARCH.BY_CATEGORY' | translate }}</h4>
        <div class="category-suggestions">
          <div class="suggestion-item category-item" 
               *ngFor="let category of getFilteredCategories()" 
               (click)="selectCategory(category)"
               role="button"
               tabindex="0"
               [attr.aria-label]="'·Éô·Éê·É¢·Éî·Éí·Éù·É†·Éò·Éê: ' + category">
            <span class="material-icons">folder</span>
            <span>{{category}}</span>
            <span class="material-icons category-arrow">arrow_forward_ios</span>
          </div>
        </div>
      </div>
      
      <!-- ‚úÖ ·Éí·Éê·Éú·Éê·ÉÆ·Éö·Éî·Éë·É£·Éö·Éò Products section - ·É£·Éô·Éî·Éó·Éî·É°·Éò UI-·Éò·Éó -->
      <div class="suggestions-section" *ngIf="getFilteredProducts().length > 0 && !isLoadingProducts">
        <h4>{{ 'HOME.SEARCH.FOUND_PRODUCTS' | translate }} ({{getFilteredProducts().length}})</h4>
        <div class="product-suggestions">
          <div class="suggestion-item product-item clickable-product" 
               *ngFor="let product of getFilteredProducts()" 
               (click)="selectProduct(product)"
               role="button"
               tabindex="0"
               [attr.aria-label]="'·Éû·É†·Éù·Éì·É£·É•·É¢·Éò: ' + product.title + ', ·É§·Éê·É°·Éò: ' + (product.price ? product.price + ' ·Éö·Éê·É†·Éò' : '·É§·Éê·É°·Éò ·Éê·É† ·Éê·É†·Éò·É° ·Éõ·Éò·Éó·Éò·Éó·Éî·Éë·É£·Éö·Éò')"
               (keydown.enter)="selectProduct(product)"
               (keydown.space)="selectProduct(product)">
            <img [src]="getProductImage(product)" 
                 alt="{{product.title}}" 
                 class="product-image"
                 (error)="onImageError($event)">
            <div class="product-info">
              <span class="product-title" [title]="product.title">{{product.title}}</span>
              <span class="product-price" *ngIf="product.price">{{product.price}} ‚Çæ</span>
              <span class="product-category" *ngIf="product.category">{{product.category}}</span>
            </div>
            <div class="product-action">
              <span class="material-icons">arrow_forward_ios</span>
              <span class="action-text">{{ 'HOME.SEARCH.DETAILS' | translate }}</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- No results message -->
      <div class="suggestions-section" *ngIf="!isLoadingProducts && getFilteredCategories().length === 0 && getFilteredProducts().length === 0 && searchQuery.trim().length > 0">
        <div class="no-results">
          <span class="material-icons">search_off</span>
          <span>{{ 'HOME.SEARCH.NO_RESULTS' | translate }}</span>
        </div>
      </div>
    </div>
  </div>
</div>
        
        <div class="start">
            <button mat-flat-button routerLink="/login">{{ 'HOME.HERO.START_NOW' | translate }}</button>
        </div>
    </div>

    <div class="circle">
        <div class="circle1">
            <img src="https://i.ibb.co/XN3xpnt/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview.png" alt="">
        </div>
        <div class="circle2">
            <img src="https://i.ibb.co/99yWFDHv/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview-removebg-preview.png" alt="">
        </div>
        <div class="circle3">
            <img src="https://i.ibb.co/676XHMsn/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview-removebg-preview-removebg-preview.png" alt="">
        </div>
    </div>
</div>




<!-- home.component.html - SCROLL/TOUCH FIXED -->

<div class="popular-products-section">
  <div *ngIf="getProductsWithHighViews().length > 0" class="popular-products-carousel">
    <h1 class="popular-products-title">{{ 'HOME.POPULAR_PRODUCTS.TITLE' | translate }}</h1>

    <!-- üî• CRITICAL: carousel-container WITH #carouselContainer REFERENCE -->
    <div class="carousel-container" >
      
      <p-carousel 
        [value]="getProductsWithHighViews()" 
        [numVisible]="4" 
        [numScroll]="1" 
        [circular]="true"
        [responsiveOptions]="responsiveOptions"
        [autoplayInterval]="5000"
        [showNavigators]="true"
        [showIndicators]="true">
        
        <ng-template let-product #item>
          <div class="product-slide">
            <div class="product-card">
              <!-- Product Image -->
              <div class="product-image">
                <img 
                  [src]="getProductImage(product)" 
                  [alt]="product.title"
                  class="product-img"
                  loading="lazy"
                  (error)="onImageError($event)">
              </div>
              
              <!-- Product Info -->
              <div class="product-info">
                <h3 class="product-title">{{ product.title }}</h3>
                
                <p class="product-description">
                  {{ product.description | slice:0:100 }}{{ product.description?.length > 100 ? '...' : '' }}
                </p>
                
                <div class="product-price">
                  {{ product.price }} {{ 'HOME.POPULAR_PRODUCTS.LARI' | translate }}
                </div>
                
                <!-- Product Stats -->
                <div class="product-stats">
                  <!-- Category -->
                  <div class="category-chip">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                      <path d="M20.59 13.41l-7.17 7.17a2 2 0 0 1-2.83 0L2 12V2h10l8.59 8.59a2 2 0 0 1 0 2.82z" 
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <line x1="7" y1="7" x2="7.01" y2="7" stroke="currentColor" stroke-width="2" 
                            stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span>{{ product.category | categoryTranslate }}</span>
                  </div>
                  
                  <!-- View Count -->
                  <div class="view-count" [class.loading]="isLoadingViews">
                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none">
                      <path d="M1 12s4-8 11-8 11 8 11 8-4 8-11 8-11-8-11-8z" 
                            stroke="currentColor" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/>
                      <circle cx="12" cy="12" r="3" stroke="currentColor" stroke-width="2" 
                              stroke-linecap="round" stroke-linejoin="round"/>
                    </svg>
                    <span class="view-text">
                      {{ formatViews(product.viewCount || 0) }} {{ 'HOME.POPULAR_PRODUCTS.VIEWS' | translate }}
                    </span>
                  </div>
                </div>
                
                <!-- View Product Button -->
                <button 
                  mat-stroked-button
                  class="view-product-btn"
                  (click)="selectProduct(product)">
                  {{ 'HOME.POPULAR_PRODUCTS.VIEW_PRODUCT' | translate }}
                </button>
              </div>
            </div>
          </div>
        </ng-template>
      </p-carousel>
    </div>
  </div>

  <!-- Loading State -->
  <div *ngIf="loading" class="loading-container">
    <div class="spinner"></div>
    <p>·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò ·Éò·É¢·Éï·Éò·É†·Éó·Éî·Éë·Éê...</p>
  </div>

  <!-- No Products State -->
  <div *ngIf="!loading && getProductsWithHighViews().length === 0" class="no-products">
    <svg width="64" height="64" viewBox="0 0 24 24" fill="none">
      <circle cx="12" cy="12" r="10" stroke="currentColor" stroke-width="2"/>
      <path d="M12 6v6m0 4h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
    </svg>
    <h3>·Éû·Éù·Éû·É£·Éö·Éê·É†·É£·Éö·Éò ·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò ·Éï·Éî·É† ·Éõ·Éù·Éò·É´·Éî·Éë·Éú·Éê</h3>
    <p>·Éê·Éõ·Éü·Éê·Éõ·Éê·Éì ·Éê·É† ·Éê·É†·Éò·É° 100+ ·Éú·Éê·ÉÆ·Éï·Éò·É° ·Éõ·É•·Éù·Éú·Éî ·Éû·É†·Éù·Éì·É£·É•·É¢·Éî·Éë·Éò</p>
  </div>
</div>





<div class="categorymain">
        <h1 class="popular-category">{{ 'HOME.CATEGORIES.TITLE' | translate }}</h1>
        <div class="category-list">
            <div class="category" (click)="onCategoryClick('·É¢·Éî·Éö·Éî·É§·Éù·Éú·Éî·Éë·Éò')">
                <div class="icon-container">
                    <span class="material-icons">smartphone</span>  
                </div>
                <p>{{ 'HOME.CATEGORIES.PHONES.NAME' | translate }}</p>
                <div class="category-description">{{ 'HOME.CATEGORIES.PHONES.DESC' | translate }}</div>
            </div>
            <div class="category" (click)="onCategoryClick('·É¢·Éî·É•·Éú·Éò·Éô·Éê')">
                <div class="icon-container">
                    <span class="material-icons">devices_other</span>
                </div>
                <p>{{ 'HOME.CATEGORIES.TECH.NAME' | translate }}</p>
                <div class="category-description">{{ 'HOME.CATEGORIES.TECH.DESC' | translate }}</div>
            </div>
            <div class="category" (click)="onCategoryClick('·Éê·Éï·É¢·Éù·Éõ·Éù·Éë·Éò·Éö·Éî·Éë·Éò')">
                <div class="icon-container">
                    <span class="material-icons">directions_car</span>
                </div>
                <p>{{ 'HOME.CATEGORIES.CARS.NAME' | translate }}</p>
                <div class="category-description">{{ 'HOME.CATEGORIES.CARS.DESC' | translate }}</div>
            </div>
            <div class="category" (click)="onCategoryClick('·É¢·Éê·Éú·É°·Éê·É™·Éõ·Éî·Éö·Éò')">
                <div class="icon-container">
                    <span class="material-icons">checkroom</span>
                </div>
                <p>{{ 'HOME.CATEGORIES.CLOTHING.NAME' | translate }}</p>
                <div class="category-description">{{ 'HOME.CATEGORIES.CLOTHING.DESC' | translate }}</div>
            </div>
            <div class="category" (click)="onCategoryClick('·É°·Éê·Éó·Éê·Éõ·Éê·É®·Éù·Éî·Éë·Éò')">
                <div class="icon-container">
                    <span class="material-icons">toys</span>
                </div>
                <p>{{ 'HOME.CATEGORIES.TOYS.NAME' | translate }}</p>
                <div class="category-description">{{ 'HOME.CATEGORIES.TOYS.DESC' | translate }}</div>
            </div>
            <div class="category" (click)="onCategoryClick('·Éô·Éù·Éõ·Éû·Éò·É£·É¢·Éî·É†·Éî·Éë·Éò')">
                <div class="icon-container">
                    <span class="material-icons">computer</span>
                </div>
                <p>{{ 'HOME.CATEGORIES.COMPUTERS.NAME' | translate }}</p>
                <div class="category-description">{{ 'HOME.CATEGORIES.COMPUTERS.DESC' | translate }}</div>
            </div>
        </div>
    </div>

    <div class="sell">
   <div class="sell-text">
    <span class="sell-free">{{ 'HOME.SELL_SECTION.FREE' | translate }}</span>
    <span class="sell-info">{{ 'HOME.SELL_SECTION.FEATURE_1' | translate }}</span>
    <span class="sell-info">{{ 'HOME.SELL_SECTION.FEATURE_2' | translate }}</span>
    <span class="sell-info">{{ 'HOME.SELL_SECTION.FEATURE_3' | translate }}</span>
    <span class="sell-info">{{ 'HOME.SELL_SECTION.FEATURE_4' | translate }}</span>
    <button mat-flat-button routerLink="/login" target="_blank" class="btnsing">{{ 'HOME.SELL_SECTION.START_TODAY' | translate }}</button>
   </div>

   <div class="sell-img">
      <div class="circle">
          <div class="circle1">
              <img src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d2/Stitch_%28Lilo_%26_Stitch%29.svg/1200px-Stitch_%28Lilo_%26_Stitch%29.svg.png" alt="">
          </div>
          <div class="circle2">
              <img src="https://image.api.playstation.com/vulcan/ap/rnd/202503/2520/f3c135f8ebdc50b782c6f5f02b27130b499e22847f05aee6.png" alt="">
          </div>
          <div class="circle3">
              <img src="https://i.ibb.co/676XHMsn/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview-removebg-preview-removebg-preview.png" alt="">
          </div>
      </div>
   </div>
    </div>

    <div class="whyus">
    <span class="why">{{ 'HOME.WHY_US.TITLE' | translate }}</span>
    <span class="free1">{{ 'HOME.WHY_US.FREE_REG' | translate }}</span>
    <span class="free1">{{ 'HOME.WHY_US.EASY_FIND' | translate }}</span>
    <span class="free1">{{ 'HOME.WHY_US.USER_ORIENTED' | translate }}</span>
    <span class="free1">{{ 'HOME.WHY_US.MODERN' | translate }}</span>
    </div>