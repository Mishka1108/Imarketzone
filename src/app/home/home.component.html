<div class="home">
    <div class="market">
        <span class="buysel">იყიდე და გაყიდე </span>
        <span class="mart">მარტივად!</span>
        <p class="text">თქვენთვის საუკეთესო ონლაინ მარკეტპლეისი სადაც შეგიძლიათ იყიდოთ და გაყიდოთ ნებისმიერი პროდუქცია</p>
        
        <!-- ძებნის სექცია -->
      <div class="search-section">
  <div class="search-container">
    <input type="text" 
           placeholder="რისი ძებნა გინდათ?" 
           [(ngModel)]="searchQuery" 
           (input)="onSearchInput($event)"
           (keyup.enter)="onSearch()"
           (focus)="showSuggestions = true"
           class="search-input">
    <button mat-flat-button (click)="onSearch()" class="search-button">
      <span class="material-icons">search</span>
    </button>
    
    <!-- Suggestions dropdown -->
    <div class="suggestions-dropdown" *ngIf="showSuggestions && searchQuery.trim().length > 0">
      
      <!-- Loading state -->
      <div class="suggestions-section" *ngIf="isLoadingProducts">
        <div class="loading-item">
          <span class="material-icons">refresh</span>
          <span>იტვირთება...</span>
        </div>
      </div>
      
      <!-- Categories section -->
      <div class="suggestions-section" *ngIf="getFilteredCategories().length > 0">
        <h4>მოძებნე კატეგორიით</h4>
        <div class="category-suggestions">
          <div class="suggestion-item category-item" 
               *ngFor="let category of getFilteredCategories()" 
               (click)="selectCategory(category)"
               role="button"
               tabindex="0"
               [attr.aria-label]="'კატეგორია: ' + category">
            <span class="material-icons">folder</span>
            <span>{{category}}</span>
            <span class="material-icons category-arrow">arrow_forward_ios</span>
          </div>
        </div>
      </div>
      
      <!-- ✅ განახლებული Products section - უკეთესი UI-ით -->
      <div class="suggestions-section" *ngIf="getFilteredProducts().length > 0 && !isLoadingProducts">
        <h4>ნაფოვნი პროდუქტი ({{getFilteredProducts().length}})</h4>
        <div class="product-suggestions">
          <div class="suggestion-item product-item clickable-product" 
               *ngFor="let product of getFilteredProducts()" 
               (click)="selectProduct(product)"
               role="button"
               tabindex="0"
               [attr.aria-label]="'პროდუქტი: ' + product.title + ', ფასი: ' + (product.price ? product.price + ' ლარი' : 'ფასი არ არის მითითებული')"
               (keydown.enter)="selectProduct(product)"
               (keydown.space)="selectProduct(product)">
            <img [src]="getProductImage(product)" 
                 alt="{{product.title}}" 
                 class="product-image"
                 (error)="onImageError($event)">
            <div class="product-info">
              <span class="product-title" [title]="product.title">{{product.title}}</span>
              <span class="product-price" *ngIf="product.price">{{product.price}} ₾</span>
              <span class="product-category" *ngIf="product.category">{{product.category}}</span>
            </div>
            <div class="product-action">
              <span class="material-icons">arrow_forward_ios</span>
              <span class="action-text">დეტალები</span>
            </div>
          </div>
        </div>
      </div>
      
      <!-- No results message -->
      <div class="suggestions-section" *ngIf="!isLoadingProducts && getFilteredCategories().length === 0 && getFilteredProducts().length === 0 && searchQuery.trim().length > 0">
        <div class="no-results">
          <span class="material-icons">search_off</span>
          <span>პროდუქტი ვერ მოიძებნა</span>
        </div>
      </div>
    </div>
  </div>
</div>
        
        <div class="start">
            <button mat-flat-button routerLink="/login" >დაიწყე ახლავე</button>
            <!-- <button mat-flat-button >გაიგე მეტი</button> -->
        </div>
    </div>

    <div class="circle">

        <div class="circle1">
            <img src="https://i.ibb.co/XN3xpnt/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview.png" alt="">
        </div>
        <div class="circle2">
            <img src="https://i.ibb.co/99yWFDHv/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview-removebg-preview.png" alt="">
        </div>
        <div class="circle3">
            <img src="https://i.ibb.co/676XHMsn/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview-removebg-preview-removebg-preview.png" alt="">
        </div>

    </div>

    
</div>

<div *ngIf="getProductsWithHighViews().length > 0;" class="popular-products-carousel">
  <h1 class="popular-products-title">პოპულარული პროდუქტები</h1>

  <p-carousel 
    [value]="getProductsWithHighViews()"
    [numVisible]="3"
    [numScroll]="3"
    [responsiveOptions]="responsiveOptions"
    [showIndicators]="true"
    [showNavigators]="true"
    [autoplayInterval]="5000"
   
    class="custom-carousel">
    
    <ng-template let-product pTemplate="item">
      <div class="product-slide">
        <div class="product-card">
          <div class="product-image2">
            <img [src]="getProductImage(product)" 
                 [alt]="product.title"
                 class="product-img"
                 (error)="onImageError($event)">
          </div>
          
          <div class="product-info2">
            <h3 class="product-title">{{ product.title }}</h3>
            <p class="product-description">{{ product.description | slice:0:100 }}...</p>
            <div class="product-price">{{ product.price }} ლარი</div>
            
            <!-- Enhanced View Counter Display -->
            <div class="product-stats">
              <div class="category-chip">
                <i class="pi pi-tag category-icon"></i>
                <span>{{ product.category }}</span>
              </div>
              <div class="view-count" [class.loading]="isLoadingViews">
                <i class="pi pi-eye view-icon"></i>
                <span class="view-text">{{ formatViews(product.viewCount || 0) }} ნახვა</span>
              </div>
            </div>
            
            <!-- Enhanced View Product Button -->
            <button mat-stroked-button
              label="პროდუქტის ნახვა"
              icon="pi pi-external-link"
              styleClass="p-button-raised p-button-primary view-product-btn"
              (click)="selectProduct(product)"  >პროდუქტის ნახვა</button>
          </div>
        </div>
      </div>
    </ng-template>
    
  </p-carousel>
</div>

<!-- No Popular Products Template -->


<div class="categorymain">
        <h1>პოპულარული კატეგორიები</h1>
        <div class="category-list">
            <div class="category" (click)="onCategoryClick('ტელეფონები')">
                <div class="icon-container">
                    <span class="material-icons">smartphone</span>  
                </div>
                <p>ტელეფონები</p>
                <div class="category-description">iPhone, Samsung, Xiaomi და სხვა</div>
            </div>
            <div class="category" (click)="onCategoryClick('ტექნიკა')">
                <div class="icon-container">
                    <span class="material-icons">devices_other</span>
                </div>
                <p>ტექნიკა</p>
                <div class="category-description">ლეპტოპები, ტელევიზორები, აუდიო</div>
            </div>
            <div class="category" (click)="onCategoryClick('ავტომობილები')">
                <div class="icon-container">
                    <span class="material-icons">directions_car</span>
                </div>
                <p>ავტომობილები</p>
                <div class="category-description">ახალი და გამოყენებული მანქანები</div>
            </div>
            <div class="category" (click)="onCategoryClick('ტანსაცმელი')">
                <div class="icon-container">
                    <span class="material-icons">checkroom</span>
                </div>
                <p>ტანსაცმელი</p>
                <div class="category-description">მოდური ტანსაცმელი ყველასთვის</div>
            </div>
            <div class="category" (click)="onCategoryClick('სათამაშოები')">
                <div class="icon-container">
                    <span class="material-icons">toys</span>
                </div>
                <p>სათამაშოები</p>
                <div class="category-description">ბავშვებისთვის და მოზრდილებისთვის</div>
            </div>
            <div class="category" (click)="onCategoryClick('კომპიუტერები')">
                <div class="icon-container">
                    <span class="material-icons">computer</span>
                </div>
                <p>კომპიუტერები</p>
                <div class="category-description">PC, Mac, აქსესუარები</div>
            </div>
        </div>
    </div>


    <div class="sell">

   <div class="sell-text">
    <span class="sell-free">🚀 გაყიდე მარტივად — უფასოდ!</span>
    <span class="sell-info">🔹განათავსე შენი პირველი 5 პროდუქტი სრულიად უფასოდ</span>
    <span class="sell-info">🔹გაიარე სწრაფი რეგისტრაცია</span>
    <span class="sell-info">🔹განათავსე ფოტოები, აღწერა და დაიწყე გაყიდვა წამებში</span>
    <span class="sell-info">🔹ტექნიკა, სათამაშოები, ტანსაცმელი, მანქანები და სხვა — რაც გინდა!</span>
    <button mat-flat-button routerLink="/login" target="_blank" class="btnsing">🔹დაიწყე დღესვე!</button>
   </div>

   <div class="sell-img">


   
      <div class="circle">
  
          <div class="circle1">
              <img src="https://upload.wikimedia.org/wikipedia/en/thumb/d/d2/Stitch_%28Lilo_%26_Stitch%29.svg/1200px-Stitch_%28Lilo_%26_Stitch%29.svg.png" alt="">
          </div>
          <div class="circle2">
              <img src="https://image.api.playstation.com/vulcan/ap/rnd/202503/2520/f3c135f8ebdc50b782c6f5f02b27130b499e22847f05aee6.png" alt="">
          </div>
          <div class="circle3">
              <img src="https://i.ibb.co/676XHMsn/Chat-GPT-Image-Apr-30-2025-09-51-56-AM-removebg-preview-removebg-preview-removebg-preview.png" alt="">
          </div>
     
  


   </div>
   </div>
    </div>


    <div class="whyus">
    <span class="why">🌟 რატომ ჩვენ?</span>
    <span class="free1">✅ უფასო რეგისტრაცია</span>
    <span class="free1">✅ იპოვე მყიდველი ან გამყიდველი მარტივად</span>
    <span class="free1">✅ მომხმარებელზე ორიენტირებული სერვისი</span>
    <span class="free1">✅ თანამედროვე დიზაინი და სწრაფი მუშაობა</span>
    </div>

    